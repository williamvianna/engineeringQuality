name: üì± CI - Testes XCUITest/iOS

on:
  push:
    branches: [ main ]
    paths:
      # Roda a pipeline somente se houver mudan√ßas na pasta 'xcuitest' ou no pr√≥prio workflow
      - 'xcuitest/**'
      - '.github/workflows/xcuitest_ci.yml'

jobs:
  run_xcuitest:
    # üö® ESSENCIAL: XCUITest S√ì PODE RODAR EM AMBIENTE macOS
    runs-on: macos-latest # Ou macos-14 para uma vers√£o espec√≠fica

    steps:
      - name: ‚¨áÔ∏è Checkout do C√≥digo
        uses: actions/checkout@v4
      
      # N√£o √© necess√°rio configurar o Xcode, pois ele j√° est√° pr√©-instalado no runner macOS

      - name: üõ†Ô∏è Definir Vers√£o do Xcode (Opcional)
        # Se voc√™ precisar de uma vers√£o espec√≠fica do Xcode (Ex: 15.0)
        # run: sudo xcode-select -switch /Applications/Xcode_15.0.app

      - name: üèÉ Rodar Testes XCUITest com xcodebuild
        # O comando xcodebuild √© a forma CLI (headless) de rodar testes iOS
        # Ajuste 'XCUITestProject' e 'MyApplicationUITests' conforme seu projeto/scheme.
        run: |
          xcodebuild clean test \
            -project XCUITestProject.xcodeproj \
            -scheme MyApplicationUITests \
            -destination 'platform=iOS Simulator,name=iPhone 15,OS=latest'
        working-directory: xcuitest
        
      # Nota: Para projetos mais complexos (Swift Package Manager, CocoaPods), 
      # substitua '-project' por '-workspace' e adicione o comando 'pod install' ou 'swift build'.