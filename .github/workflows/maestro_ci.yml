name: üé¨ CI - Testes Mobile Maestro

on:
  push:
    branches: [ main ]
    paths:
      # Roda a pipeline somente se houver mudan√ßas na pasta 'maestro' ou no pr√≥prio workflow
      - 'maestro/**'
      - '.github/workflows/maestro_ci.yml'

jobs:
  run_maestro_tests:
    # Aten√ß√£o: Testes mobile em CI com Maestro geralmente exigem a instala√ß√£o do Android SDK
    # e um emulador, o que √© complexo em CI/CD. Este CI valida a sintaxe e o comando CLI.
    runs-on: ubuntu-latest
    steps:
      - name: ‚¨áÔ∏è Checkout do C√≥digo
        uses: actions/checkout@v4

      - name: ‚öôÔ∏è Configurar Node.js (v18)
        # Necess√°rio para a instala√ß√£o da CLI do Maestro via npm
        uses: actions/setup-node@v4
        with:
          node-version: 18

      - name: üì¶ Instalar Maestro CLI
        # Instala a ferramenta globalmente, fora da subpasta
        run: npm install -g maestro

      # Opcional: Configurar o Android SDK e Emulador (Recomendado para execu√ß√£o funcional)
      # Adicione steps para setup do Android SDK e launch do emulador aqui se for executar de fato.
      
      - name: üèÉ Rodar Testes Maestro
        # O comando √© executado dentro da pasta 'maestro' e aponta para o fluxo YAML
        # Ajuste o caminho 'flows/initial_test.yaml' conforme a localiza√ß√£o real.
        run: maestro test flows/initial_test.yaml
        working-directory: maestro